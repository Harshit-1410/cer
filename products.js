// Products Data
const productsData = [
    {
        id: 1,
        name: "S30185 Light",
        category: "Floor Tiles",
        size: "600x600",
        price: 80,
        image: "https://i.ibb.co/pjqNfpW2/60x600-page44-img1.jpg",
        finish: "Matt",
        
        
    },
    {
        id: 2,
        name: "1007 Wood-Series", 
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/p7FdGSP/1007-Wood-Series.jpg",
        finish: "Matt",
        
    },
    {
        id: 3,
        name: "1008 Wood-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/rGt06yDF/1008-Wood-Series.jpg",
        finish: "Matt",
    },
    {
        id: 4,
        name: "1062 Wood-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/N6SDhh28/1062-Wood-Series.jpg",
        finish: "Matt",
    },
    {
        id: 5,
        name: "1069 Wood-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/wh2jyyDb/1069-Wood-Series.jpg",
        finish: "Matt",
    },
    {
        id: 6,
        name: "1073 Wood-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/tMc418Bv/1073-Wood-Series.jpg",
        finish: "Matt",
    },
    {
        id: 7,
        name: "2046 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/TM505YS3/2046-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 8,
        name: "2090 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/jk6bWkzB/2090-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 9,
        name: "2104 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/HTzZmJJD/2104-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 10,
        name: "2124 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/5gzQ35pL/2124-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 11,
        name: "2146 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/V0jfZfqX/2146-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 12,
        name: "2156 Galicha-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/TM505YS3/2046-Galicha-Series.jpg",
        finish: "Matt",
    },
    {
        id: 13,
        name: "3056 3D-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/bg7Pw4Qv/3056-3-D-Series.jpg",
        finish: "Matt",
    },
    {
        id: 14,
        name: "4009 Marble-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/yFcptgtw/4009-Marble-Series.jpg",
        finish: "Matt",
    },
    {
        id: 15,
        name: "4011 Marble-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/C5f4nW4J/4011-Marble-Series.jpg",
        finish: "Matt",
    },
    {
        id: 16,
        name: "4048 Marble-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/zvKYjf8/4048-Marble-Series.jpg",
        finish: "Matt",
    },
    {
        id: 17,
        name: "6013 BookMatch-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/krcxVV5/6013-Bookmatch.png",
        finish: "Matt",
    },
    {
        id: 18,
        name: "6024 BookMatch-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/Y4q9FP9B/6024-Bookmatch.png",
        finish: "Matt",
    },
    {
        id: 19,
        name: "6511DK Endless-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/XxJ7HkN8/6511-DK-Endless.pngg",
        finish: "Matt",
    },
    {
        id: 20,
        name: "6511LT Endless-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/1Yh5F5Lr/6511-LT-Endless.png",
        finish: "Matt",
    },
    {
        id: 21,
        name: " 7001 DC-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/YThj3sJ5/7001-DC-Series.jpg",
        finish: "Matt",
    },
    {
        id: 22,
        name: " 7002 DC-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/tMB4gJjW/7002-DC-Series.jpg",
        finish: "Matt",
    },
    {
        id: 23,
        name: " 7012 DC-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/7xbn7rcQ/7012-DC-Series.jpg",
        finish: "Matt",
    },
    {
        id: 24,
        name: " 7013 DC-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/FqbkVy6X/7013-DC-Series.jpg",
        finish: "Matt",
    },
    {
        id: 25,
        name: " 71001DK Slate-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/jZVWx2BH/71001-DK-Punch-Slate-Series.jpg",
        finish: "Matt",
    },
    {
        id: 26,
        name: " 71001LT Slate-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/k2C7cn2q/71001-LT-Punch-Slate-Series.jpg",
        finish: "Matt",
    },
    {
        id: 27,
        name: " 7013 DC-Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/FqbkVy6X/7013-DC-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 28,
        name: "8002 Light Dark",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/Xx9mXHWR/8002-Light-Dark.jpg",
        finish: "Matt",
    },
    { 
        id: 29,
        name: "8011 Dark",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/S4TFQ1fJ/8011-Dark.png",
        finish: "Matt",
    },
    { 
        id: 30,
        name: "8011 Light",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/m5tz1T21/8011-Light.png",
        finish: "Matt",
    },
    { 
        id: 31,
        name: "8029 Dark",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/R1b77tf/8029-Dark.png",
        finish: "Matt",
    },
    { 
        id: 32,
        name: "8029 Light",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/cK2x4Ry3/8029-Light.png",
        finish: "Matt",
    },
    { 
        id: 33,
        name: "S30051 Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/H9mNdzV/S30051-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 34,
        name: "S30079 DK Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/xSf0hNL1/S30079-DK-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 35,
        name: "S30079 LT Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/XkWLrR3T/S30079-LT-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 36,
        name: "S30086 Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/KpQ6cbzT/S30086-sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 37,
        name: "S30122 Dk Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/jZgZ5QjB/S30122-Dk-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 38,
        name: "S30122 LT Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/qftN4Jg/S30122-LT-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 39,
        name: "S30123 Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/DHkWvkMv/S30123-Sugar-Series.jpg",
        finish: "Matt",
    },
    { 
        id: 40,
        name: "S30183 Sugar Series",
        category: "Floor Tiles",
        size: "600x600",
        price: 65,
        image: "https://i.ibb.co/zVtmkj1y/S30183-Sugar-Series.jpg",
        finish: "Matt",
    },
    

];

// Global Variables
let currentProducts = [...productsData];
let filteredProducts = [...productsData];
let currentPage = 1;
const productsPerPage = 8;
let isLoading = false;

// DOM Elements
const searchInput = document.getElementById('searchInput');
const categoryFilter = document.getElementById('categoryFilter');
const sizeFilter = document.getElementById('sizeFilter');
const priceFilter = document.getElementById('priceFilter');
const sortFilter = document.getElementById('sortFilter');
const productsContainer = document.getElementById('productsContainer');
const resultsCount = document.getElementById('resultsCount');
const totalCount = document.getElementById('totalCount');
const loadMoreBtn = document.getElementById('loadMoreBtn');
const activeFilters = document.getElementById('activeFilters');

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    initializeProducts();
    setupEventListeners();
    updateResultsCount();
});

// Initialize products display
function initializeProducts() {
    displayProducts(filteredProducts.slice(0, productsPerPage));
    updateResultsCount();
}

// Setup event listeners
function setupEventListeners() {
    // Search functionality
    searchInput.addEventListener('input', debounce(handleSearch, 300));
    
    // Filter functionality
    categoryFilter.addEventListener('change', handleFilters);
    sizeFilter.addEventListener('change', handleFilters);
    priceFilter.addEventListener('change', handleFilters);
    sortFilter.addEventListener('change', handleSort);
    
    // Load more functionality
    loadMoreBtn.addEventListener('click', loadMoreProducts);
}

// Handle search
function handleSearch() {
    const searchTerm = searchInput.value.toLowerCase().trim();
    // Filter products based on search term and current filters
    filteredProducts = currentProducts.filter(product => {
        // Check search term in name (and optionally category)
        const matchesSearch = product.name.toLowerCase().includes(searchTerm);
        // Also apply current filters
        const category = categoryFilter.value;
        const size = sizeFilter.value;
        const price = priceFilter.value;
        let matchesCategory = true, matchesSize = true, matchesPrice = true;
        if (category) {
            // Accept both display name and value
            matchesCategory = product.category.toLowerCase().includes(category.toLowerCase()) || category.toLowerCase().includes(product.category.toLowerCase());
        }
        if (size) {
            matchesSize = product.size === size;
        }
        if (price) {
            matchesPrice = checkPriceRange(product.price, price);
        }
        return matchesSearch && matchesCategory && matchesSize && matchesPrice;
    });
    currentPage = 1;
    displayProducts(filteredProducts.slice(0, productsPerPage));
    updateResultsCount();
    updateActiveFilters();
}

// Handle filters
function handleFilters() {
    const category = categoryFilter.value;
    const size = sizeFilter.value;
    const price = priceFilter.value;
    const searchTerm = searchInput.value.toLowerCase().trim();
    filteredProducts = currentProducts.filter(product => {
        let matchesCategory = true, matchesSize = true, matchesPrice = true, matchesSearch = true;
        if (category) {
            matchesCategory = product.category.toLowerCase().includes(category.toLowerCase()) || category.toLowerCase().includes(product.category.toLowerCase());
        }
        if (size) {
            matchesSize = product.size === size;
        }
        if (price) {
            matchesPrice = checkPriceRange(product.price, price);
        }
        if (searchTerm) {
            matchesSearch = product.name.toLowerCase().includes(searchTerm);
        }
        return matchesCategory && matchesSize && matchesPrice && matchesSearch;
    });
    currentPage = 1;
    displayProducts(filteredProducts.slice(0, productsPerPage));
    updateResultsCount();
    updateActiveFilters();
}

// Check price range
function checkPriceRange(productPrice, priceRange) {
    switch(priceRange) {
        case '0-50':
            return productPrice < 50;
        case '50-100':
            return productPrice >= 50 && productPrice < 100;
        case '100-200':
            return productPrice >= 100 && productPrice < 200;
        case '200+':
            return productPrice >= 200;
        default:
            return true;
    }
}

// Handle sorting
function handleSort() {
    const sortBy = sortFilter.value;
    
    filteredProducts.sort((a, b) => {
        switch(sortBy) {
            case 'name':
                return a.name.localeCompare(b.name);
            case 'name-desc':
                return b.name.localeCompare(a.name);
            case 'price':
                return a.price - b.price;
            case 'price-desc':
                return b.price - a.price;
            case 'popular':
                return b.popular - a.popular;
            default:
                return 0;
        }
    });
    
    currentPage = 1;
    displayProducts(filteredProducts.slice(0, productsPerPage));
    updateActiveFilters();
}

// Display products
function displayProducts(products) {
    if (products.length === 0) {
        productsContainer.innerHTML = `
            <div class="col-12">
                <div class="no-results">
                    <i class="fas fa-search"></i>
                    <h3>No products found</h3>
                    <p>Try adjusting your search or filter criteria</p>
                    <button class="btn btn-primary" onclick="clearAllFilters()">Clear All Filters</button>
                </div>
            </div>
        `;
        // Hide load more button (infinite scroll)
        loadMoreBtn.style.display = 'none';
        return;
    }
    
    const productsHTML = products.map(product => createProductCard(product)).join('');
    
    if (currentPage === 1) {
        productsContainer.innerHTML = productsHTML;
    } else {
        productsContainer.innerHTML += productsHTML;
    }
}

// Create product card HTML
function createProductCard(product) {
    const searchTerm = searchInput.value.toLowerCase();
    const highlightedName = highlightSearchTerm(product.name, searchTerm);
    
    return `
        <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="product-card" data-product-id="${product.id}">
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" loading="lazy">
                    ${product.popular ? '<span class="product-badge">Popular</span>' : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-name">${highlightedName}</h3>
                    <p class="product-category">${getCategoryDisplayName(product.category)}</p>
                    <div class="product-price">₹${product.price}/sq ft</div>
                    <div class="product-size">${product.size} mm</div>
                    <div class="product-actions">
                        <button class="btn-quick-view" onclick="openProductModal(${product.id})">
                            <i class="fas fa-eye me-1"></i>Quick View
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Highlight search terms
function highlightSearchTerm(text, searchTerm) {
    if (!searchTerm) return text;
    
    const regex = new RegExp(`(${searchTerm})`, 'gi');
    return text.replace(regex, '<span class="highlight">$1</span>');
}

// Get category display name
function getCategoryDisplayName(category) {
    const categoryNames = {
        'floor': 'Floor Tiles',
        'wall': 'Wall Tiles',
        'outdoor': 'Outdoor Tiles',
        '3d': '3D Designer',
        'marble': 'Marble Finish',
        'mosaic': 'Mosaic Collection'
    };
    return categoryNames[category] || category;
}

// Infinite scroll logic
window.addEventListener('scroll', function() {
    if (isLoading) return;
    // Check if user is near the bottom of the page
    const scrollPosition = window.innerHeight + window.scrollY;
    const threshold = document.body.offsetHeight - 200; // 200px from bottom
    if (scrollPosition >= threshold) {
        const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
        if (currentPage < totalPages) {
            isLoading = true;
            // Show loading message
            const loadingRow = document.getElementById('infiniteLoadingRow');
            if (loadingRow) loadingRow.style.display = 'block';
            setTimeout(() => {
                currentPage++;
                displayProducts(filteredProducts.slice(0, currentPage * productsPerPage));
                updateResultsCount();
                isLoading = false;
                // Hide loading message
                if (loadingRow) loadingRow.style.display = 'none';
            }, 800);
        }
    }
});

// Update results count
function updateResultsCount() {
    const displayedCount = Math.min(currentPage * productsPerPage, filteredProducts.length);
    resultsCount.textContent = displayedCount;
    totalCount.textContent = filteredProducts.length;
}

// Update active filters
function updateActiveFilters() {
    const filters = [];
    
    if (categoryFilter.value) {
        filters.push({
            type: 'category',
            value: categoryFilter.value,
            label: getCategoryDisplayName(categoryFilter.value)
        });
    }
    
    if (sizeFilter.value) {
        filters.push({
            type: 'size',
            value: sizeFilter.value,
            label: `${sizeFilter.value} mm`
        });
    }
    
    if (priceFilter.value) {
        filters.push({
            type: 'price',
            value: priceFilter.value,
            label: getPriceRangeLabel(priceFilter.value)
        });
    }
    
    displayActiveFilters(filters);
}

// Display active filters
function displayActiveFilters(filters) {
    if (filters.length === 0) {
        activeFilters.innerHTML = '';
        return;
    }
    
    const filtersHTML = filters.map(filter => `
        <span class="filter-tag">
            ${filter.label}
            <button class="remove-filter" onclick="removeFilter('${filter.type}')">
                <i class="fas fa-times"></i>
            </button>
        </span>
    `).join('');
    
    activeFilters.innerHTML = filtersHTML;
}

// Remove filter
function removeFilter(filterType) {
    switch(filterType) {
        case 'category':
            categoryFilter.value = '';
            break;
        case 'size':
            sizeFilter.value = '';
            break;
        case 'price':
            priceFilter.value = '';
            break;
    }
    
    handleFilters();
}

// Clear all filters
function clearAllFilters() {
    searchInput.value = '';
    categoryFilter.value = '';
    sizeFilter.value = '';
    priceFilter.value = '';
    sortFilter.value = 'name';
    
    filteredProducts = [...currentProducts];
    currentPage = 1;
    displayProducts(filteredProducts.slice(0, productsPerPage));
    updateResultsCount();
    updateActiveFilters();
}

// Get price range label
function getPriceRangeLabel(priceRange) {
    const labels = {
        '0-50': 'Under ₹50/sq ft',
        '50-100': '₹50 - ₹100/sq ft',
        '100-200': '₹100 - ₹200/sq ft',
        '200+': 'Above ₹200/sq ft'
    };
    return labels[priceRange] || priceRange;
}

// Open product modal
function openProductModal(productId) {
    const product = productsData.find(p => p.id === productId);
    if (!product) return;
    
    document.getElementById('modalTitle').textContent = product.name;
    document.getElementById('modalImage').src = product.image;
    document.getElementById('modalImage').alt = product.name;
    document.getElementById('modalName').textContent = product.name;
    document.getElementById('modalCategory').textContent = getCategoryDisplayName(product.category);
    document.getElementById('modalPrice').textContent = `₹${product.price}`;
    document.getElementById('modalSize').textContent = `${product.size} mm`;
    document.getElementById('modalFinish').textContent = product.finish;
    document.getElementById('modalDescription').textContent = product.description;
    
    const modal = new bootstrap.Modal(document.getElementById('productModal'));
    modal.show();
}

// Open calculator modal
function openCalculatorModal() {
    // Get the current product from the modal
    const modalName = document.getElementById('modalName').textContent;
    const modalImage = document.getElementById('modalImage').src;
    const modalSize = document.getElementById('modalSize').textContent;
    const modalPrice = document.getElementById('modalPrice').textContent;
    
    // Populate calculator modal with product info
    document.getElementById('calcProductImage').src = modalImage;
    document.getElementById('calcProductName').textContent = modalName;
    document.getElementById('calcProductSize').textContent = modalSize;
    document.getElementById('calcProductPrice').textContent = modalPrice;
    
    // Close product modal and open calculator modal
    const productModal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
    productModal.hide();
    
    setTimeout(() => {
        const calculatorModal = new bootstrap.Modal(document.getElementById('calculatorModal'));
        calculatorModal.show();
    }, 300);
}

// Calculate tiles for specific product
function calculateProductTiles() {
    const length = parseFloat(document.getElementById('calcRoomLength').value);
    const width = parseFloat(document.getElementById('calcRoomWidth').value);
    const calcBtn = document.getElementById('calcCalculateBtn');
    const resultDiv = document.getElementById('calcEstimateResult');
    
    // Get product info
    const productSize = document.getElementById('calcProductSize').textContent;
    const productPrice = parseFloat(document.getElementById('calcProductPrice').textContent.replace('₹', ''));

    // Validate inputs
    if (!length || !width || !productSize) {
        alert('Please fill in all fields');
        return;
    }

    if (length <= 0 || width <= 0) {
        alert('Please enter valid room dimensions');
        return;
    }

    // Show loading state
    calcBtn.classList.add('calculating');
    calcBtn.innerHTML = 'Calculating...';
    calcBtn.disabled = true;

    // Simulate calculation delay
    setTimeout(() => {
        // Calculate room area
        const area = length * width;
        
        // Parse tile dimensions (remove " mm" and convert mm to meters)
        const sizeText = productSize.replace(' mm', ''); // Remove " mm" suffix
        const [tileLengthMm, tileWidthMm] = sizeText.split('x').map(Number);
        
        // Validate tile dimensions
        if (isNaN(tileLengthMm) || isNaN(tileWidthMm)) {
            alert('Invalid tile size format. Please check the product size.');
            calcBtn.classList.remove('calculating');
            calcBtn.innerHTML = '<i class="fas fa-calculator me-2"></i>Calculate Tiles';
            calcBtn.disabled = false;
            return;
        }
        
        const tileLengthM = tileLengthMm / 1000;
        const tileWidthM = tileWidthMm / 1000;
        
        // Calculate tiles needed with precise calculation
        const tilesPerRow = Math.ceil(length / tileLengthM);
        const tilesPerColumn = Math.ceil(width / tileWidthM);
        const tilesNeeded = tilesPerRow * tilesPerColumn;
        
        // Calculate wastage (5% for cutting and breakage)
        const wastage = Math.ceil(tilesNeeded * 0.05);
        const totalTiles = tilesNeeded + wastage;
        
        // Calculate total cost
        const totalCost = totalTiles * productPrice;

        // Update result display with perfect results
        document.getElementById('calcRoomArea').textContent = area.toFixed(2) + ' m²';
        document.getElementById('calcTilesNeeded').textContent = tilesNeeded;
        document.getElementById('calcWastage').textContent = wastage;
        document.getElementById('calcTotalTiles').textContent = totalTiles;
        document.getElementById('calcTotalCost').textContent = '₹' + totalCost.toFixed(2);

        // Show results
        resultDiv.style.display = 'block';

        // Reset button
        calcBtn.classList.remove('calculating');
        calcBtn.innerHTML = '<i class="fas fa-calculator me-2"></i>Calculate Tiles';
        calcBtn.disabled = false;
    }, 1500);
}

// Debounce function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Add smooth scrolling for navigation
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Add loading animation for product cards
function addLoadingAnimation() {
    const cards = document.querySelectorAll('.product-card');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
    });
}

// Initialize loading animation
setTimeout(addLoadingAnimation, 100);